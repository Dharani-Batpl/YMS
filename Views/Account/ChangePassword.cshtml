@{
    Layout = null;
}

@model YardManagementApplication.Models.ChangePasswordRequest

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Change Password – Yard Management</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- Site CSS -->
    <link href="~/css/site.css" rel="stylesheet" />

    <style>
        .validation-summary-errors ul {
            list-style: none;
            padding-left: 0;
        }
    .password-toggle {
        cursor: pointer !important;
        pointer-events: auto !important;
        z-index: 20 !important;
    }


    </style>
</head>

<body>

    <!-- ========================= MOBILE VIEW ========================= -->
    <section class="mobile-hero d-lg-none">

        <main class="mobile-form d-flex flex-column align-items-center">

            <header class="mobile-header text-center mb-3">
                <h1 class="hero-title mb-0">Yard Management</h1>
            </header>

            <div class="card login-card border-0 rounded-0 p-2">
                <div class="card-body p-4">

                    <div class="text-center mb-3">
                        <img src="~/images/rockwell_logo_red.png" style="width:40%; max-width:220px;">
                    </div>

                    <h1 class="h3 text-center mb-3">Change Password</h1>

                    <!-- SUCCESS MESSAGE -->
                    @if (TempData["Success"] != null)
                    {
                        <div class="alert alert-success text-center">@TempData["Success"]</div>
                    }

                    <!-- ERROR MESSAGES -->
                    @Html.ValidationSummary(false, "", new { @class = "text-danger mb-3" })

                    <form method="post" autocomplete="off">

                        <input type="text" style="display:none">
                        <input type="password" style="display:none">

                        <!-- Username -->
                        <div class="form-floating mb-3">
                            <input asp-for="Username" readonly class="form-control bg-light" />
                            <label>Username</label>
                        </div>

                        <!-- Old Password -->
                        @* <div class="form-floating mb-3 position-relative">
                            <input asp-for="OldPassword"
                                   type="password"
                                   class="form-control password-field"
                                   id="OldPassword_D" />
                            <label>Old Password</label>

                            <span class="material-icons password-toggle
                                         position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                  data-target="OldPassword_D"
                                  style="cursor:pointer;">
                                visibility_off
                            </span>
                        </div> *@

                        <!-- New Password -->
                        <div class="form-floating mb-3 position-relative">
                            <input asp-for="NewPassword"
                                   type="password"
                                   class="form-control password-field"
                                   id="NewPassword_D" />
                            <label>New Password</label>

                            <span class="material-icons password-toggle
                                         position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                  data-target="NewPassword_D"
                                  style="cursor:pointer;">
                                visibility_off
                            </span>
                        </div>

                        <!-- Confirm Password -->
                        <div class="form-floating mb-4 position-relative">
                            <input asp-for="ConfirmPassword"
                                   type="password"
                                   class="form-control password-field"
                                   id="ConfirmPassword_D" />
                            <label>Confirm Password</label>

                            <span class="material-icons password-toggle
                                         position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                  data-target="ConfirmPassword_D"
                                  style="cursor:pointer;">
                                visibility_off
                            </span>
                        </div>


                        <button type="submit" class="btn btn-dark btn-lg w-100 rounded-3">
                            Change Password
                        </button>

                        <br /><br />
                        <img src="~/images/powered by ftoptix.png"
                             style="width:30%; display:block; margin:0 auto;" />
                    </form>
                </div>
            </div>

            <footer class="mobile-footer mt-3 text-center">
                <h6 class="mb-0">© 2025 Rockwell Automation. All rights reserved.</h6>
            </footer>

        </main>
    </section>

    <!-- ========================= DESKTOP VIEW ========================= -->
    <main class="auth-layout d-none d-lg-flex">

        <!-- LEFT HERO PANEL -->
        <aside class="col-5 col-xl-4 hero-panel p-0 d-none d-lg-block">
            <div class="hero-overlay"></div>

            <div class="hero-content">
                <header>
                    <div class="d-flex justify-content-center align-items-center" style="height:100px;">
                        <h1 class="hero-title mb-3">Yard Management</h1>
                    </div>
                </header>

                <footer class="legal">
                    <div class="d-flex justify-content-center align-items-center" style="height:100px;">
                        <img src="~/images/rockwell_logo_white.png" style="width:40%;">
                    </div>
                    <h6 style="font-size:10px; text-align:center">
                        © 2025 Rockwell Automation. All rights reserved.
                    </h6>
                </footer>
            </div>
        </aside>

        <!-- RIGHT FORM PANEL -->
        <section class="flex-grow-1 d-flex align-items-center justify-content-center bg-light">

            <div class="login-wrap w-100 px-4 px-xl-5">
                <div class="card login-card rounded-0">

                    <div class="card-body p-4 p-md-5">

                        <h2 class="text-center fw-bold mb-1">Change Password</h2>
                        <p class="text-center text-muted mb-4">Update your password</p>

                        <!-- SUCCESS -->
                        @if (TempData["Success"] != null)
                        {
                            <div class="alert alert-success text-center">@TempData["Success"]</div>
                        }

                        <!-- ERRORS -->
                        @Html.ValidationSummary(false, "", new { @class = "text-danger mb-3" })

                        <form method="post" autocomplete="off">

                            <input type="text" style="display:none">
                            <input type="password" style="display:none">

                            <!-- Username -->
                            <div class="form-floating mb-3">
                                <input asp-for="Username" readonly class="form-control bg-light" />
                                <label>Username</label>
                            </div>

                            <!-- Old Password -->
                            @* <div class="form-floating mb-3 position-relative">
                                <input asp-for="OldPassword" type="password" class="form-control" id="OldPassword" />
                                <label>Old Password</label>

                                <span class="material-icons password-toggle position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                      data-target="OldPassword"
                                      style="cursor:pointer;">visibility_off</span>
                            </div> *@

                            <!-- New Password -->
                            <div class="form-floating mb-3 position-relative">
                                <input asp-for="NewPassword" type="password" class="form-control" id="NewPassword" />
                                <label>New Password</label>

                                <span class="material-icons password-toggle position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                      data-target="NewPassword"
                                      style="cursor:pointer;">visibility_off</span>
                            </div>

                            <!-- Confirm Password -->
                            <div class="form-floating mb-4 position-relative">
                                <input asp-for="ConfirmPassword" type="password" class="form-control" id="ConfirmPassword" />
                                <label>Confirm Password</label>

                                <span class="material-icons password-toggle position-absolute top-50 end-0 translate-middle-y me-3 text-muted"
                                      data-target="ConfirmPassword"
                                      style="cursor:pointer;">visibility_off</span>
                            </div>

                            <button type="submit" class="btn btn-dark btn-lg w-100">
                                Change Password
                            </button>

                            <br /><br />
                            <img src="~/images/powered by ftoptix.png"
                                 style="width:30%; display:block; margin:0 auto;" />
                        </form>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <!-- JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

   <script>
    $(function () {

        $(".password-toggle").click(function () {

            let targetId = $(this).data("target");
            let input = $("#" + targetId);

            if (input.attr("type") === "password") {
                input.attr("type", "text");
                $(this).text("visibility");
            } else {
                input.attr("type", "password");
                $(this).text("visibility_off");
            }
        });

    });
</script>


</body>
</html>
